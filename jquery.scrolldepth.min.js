/*!
 * @preserve
 * jquery.scrolldepth.js | v0.8
 * Copyright (c) 2015 Rob Flaherty (@robflaherty)
 * Licensed under the MIT and GPL licenses.
 */
!function(e,n,t){"use strict";var a,i,r,o,l={minHeight:0,elements:[],percentage:!0,userTiming:!0,pixelDepth:!0,nonInteraction:!0,gaGlobal:!1,gtmOverride:!1,eventNaming:{category:{scrollDepth:"Scroll Depth"},action:{percentage:"Percentage",elements:"Elements",pixelDepth:"Pixel Depth"},label:{baseline:"Baseline"}}},c=e(n),g=[],u=0;e.scrollDepth=function(s){function v(e){var t=s.eventNaming.category.scrollDepth,l=s.eventNaming.label.baseline;o?o({event:"ScrollDistance",eventCategory:t,eventAction:e,eventLabel:l,eventValue:1,eventNonInteraction:!0}):(a&&n[r]("send","event",t,e,l,1,{nonInteraction:!0}),i&&_gaq.push(["_trackEvent",t,e,l,1,!0]))}function p(e,t,l,c){var g=s.eventNaming.category.scrollDepth,v=s.eventNaming.action.pixelDepth;o?(o({event:"ScrollDistance",eventCategory:g,eventAction:e,eventLabel:t,eventValue:1,eventNonInteraction:s.nonInteraction}),s.pixelDepth&&arguments.length>2&&l>u&&(u=l,o({event:"ScrollDistance",eventCategory:g,eventAction:v,eventLabel:y(l),eventValue:1,eventNonInteraction:s.nonInteraction})),s.userTiming&&arguments.length>3&&o({event:"ScrollTiming",eventCategory:g,eventAction:e,eventLabel:t,eventTiming:c})):(a&&(n[r]("send","event",g,e,t,1,{nonInteraction:s.nonInteraction}),s.pixelDepth&&arguments.length>2&&l>u&&(u=l,n[r]("send","event",g,v,y(l),1,{nonInteraction:s.nonInteraction})),s.userTiming&&arguments.length>3&&n[r]("send","timing",g,e,c,t)),i&&(_gaq.push(["_trackEvent",g,e,t,1,s.nonInteraction]),s.pixelDepth&&arguments.length>2&&l>u&&(u=l,_gaq.push(["_trackEvent",g,v,y(l),1,s.nonInteraction])),s.userTiming&&arguments.length>3&&_gaq.push(["_trackTiming",g,e,c,t,100])))}function h(e){return{"25%":parseInt(.25*e,10),"50%":parseInt(.5*e,10),"75%":parseInt(.75*e,10),"100%":e-5}}function m(n,t,a){var i=s.eventNaming.action.percentage;e.each(n,function(n,r){-1===e.inArray(n,g)&&t>=r&&(p(i,n,t,a),g.push(n))})}function f(n,t,a){var i=s.eventNaming.action.elements;e.each(n,function(n,r){-1===e.inArray(r,g)&&e(r).length&&t>=e(r).offset().top&&(p(i,r,t,a),g.push(r))})}function y(e){return(250*Math.floor(e/250)).toString()}function D(e,n){var t,a,i,r=null,o=0,l=function(){o=new Date,r=null,i=e.apply(t,a)};return function(){var c=new Date;o||(o=c);var g=n-(c-o);return t=this,a=arguments,0>=g?(clearTimeout(r),r=null,o=c,i=e.apply(t,a)):r||(r=setTimeout(l,g)),i}}var d=+new Date;s=e.extend(!0,{},l,s),e(t).height()<s.minHeight||(s.gaGlobal?(a=!0,r=s.gaGlobal):"function"==typeof ga?(a=!0,r="ga"):"function"==typeof __gaTracker&&(a=!0,r="__gaTracker"),"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(i=!0),"function"==typeof s.eventHandler?o=s.eventHandler:"undefined"==typeof dataLayer||"function"!=typeof dataLayer.push||s.gtmOverride||(o=function(e){dataLayer.push(e)}),s.percentage?v(s.eventNaming.action.percentage):s.elements&&v(s.eventNaming.action.elements),c.on("scroll.scrollDepth",D(function(){var a=e(t).height(),i=n.innerHeight?n.innerHeight:c.height(),r=c.scrollTop()+i,o=h(a),l=+new Date-d;return g.length>=4+s.elements.length?void c.off("scroll.scrollDepth"):(s.elements&&f(s.elements,r,l),void(s.percentage&&m(o,r,l)))},500)))}}(jQuery,window,document);